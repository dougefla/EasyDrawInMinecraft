# EasyDrawInMinecraft
A mcfunction generator for drawing in minecraft
## Demo
http://draw.douge.net.cn/

## Develop Log
- 2020/04/26: V0.1.3 开发中

## 问题背景
![TIM图片20200322183530.png](https://i.loli.net/2020/03/22/SXLreqn1NDQ3gbw.png)
在Minecraft中，一条/fill指令可以将从(x1,y1,z1)到(x2,y2,z2)的立方空间填充为单一颜色的方块。  

那我们如果想将一张128\*128的黑白二值图片在MC中进行展示，如果逐像素进行填充，相应的需要128\*128 = 16384条指令。  

这显然不是很好的方案，因为对于黑白图片，会有大量的区块是“纯白”或“纯黑”的，可以用一条指令填充。  

比如：  
0 0 0 0  
0 0 0 0  
1 1 1 0  
1 1 1 0  
如果是逐像素填充，就是4*4=16条  
但实际上，我们可以用三条指令实现填充：（x代表未填充）  
- 第一条：   
0 0 0 0  
0 0 0 0  
x x x x    
x x x x    
- 第二条：   
0 0 0 0  
0 0 0 0  
1 1 1 x  
1 1 1 x   
- 第三条：   
0 0 0 0  
0 0 0 0  
1 1 1 0  
1 1 1 0  


## 问题描述
- 我们将问题描述如下：
    - 对于N*N的二值矩阵，即a_ij = 0或1，如何进行无重叠的矩形划分，使得每个划分区块内的值相同，且划分区块数目最少？

![TIM图片20200322184843.png](https://i.loli.net/2020/03/22/JyodZAMr39bYuC1.png)

## 一种非最优的解决思路（二维RLE）
![image.png](https://i.loli.net/2020/03/22/nYbVcJCEOMmoUia.png)

1. 取x最小z尽量小的没被标记的点，记为p-start，让一个指针p-point从p-start开始向+x延伸，直到遇到不同色的，
2. 再向+z延伸，同时判断该点和出发点形成的矩形中是否有杂色
3. 如果有杂色，则结束，返回p-point的上一个位置和p-start的坐标。形成的矩形中的所有点标记上已划分
4. p-start继续取x最小z尽量小的没被标记的点，直到结束

- 效果：指令下降到了7000-10000条

- 优点：可以拓展到多值矩阵

## 问题进一步思考
- 回到开头的那个问题：
- 对于矩阵：  
0 0 0 0  
0 0 0 0  
1 1 1 0  
1 1 1 0  
- 最少其实不是涂3次，而是两次：    
- 第一次：  
0 0 0 0  
0 0 0 0  
0 0 0 0  
0 0 0 0  

- 第二次：  
0 0 0 0    
0 0 0 0  
1 1 1 0  
1 1 1 0  

## 另一种非最优的解决思路
- 当允许覆盖时，我们考虑如下方法：  

- 对于4*4矩阵：  
1 1 1 1    
1 1 1 0    
0 1 0 0    
0 1 1 0    
- 判断一个4*4矩阵内最多的颜色，将整个涂为该色:  
1 1 1 1    
1 1 1 1    
1 1 1 1    
1 1 1 1    
- 涂了1次
- 分为4个2\*2矩阵，判断每个2\*2矩阵内最多的颜色，将每个2\*2涂为该色，如果已是该色就不涂，如果两种颜色数量相同也不涂:  
1 1 1 1  
1 1 1 1  
1 1 0 0  
1 1 0 0  
- 涂了1次  
- 每个2\*2分为四个1\*1，同样进行涂色：  
1 1 1 1  
1 1 1 0  
0 1 0 0  
0 1 1 0  
- 涂了4次

- 效果：一共涂了6次。其实对于2^k\*2^k矩阵，最差情况也是涂2^k\*2^k次。如果使用第一种算法是7次。
